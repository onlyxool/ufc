async function onLoadFunction() {
    try {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const paramValue = urlParams.get('event');
        let host_url = 'http://127.0.0.1:5000/predict/'+paramValue;

        const response = await fetch(host_url, {method: 'GET',headers: {'Content-Type': 'application/json',}});
            if (response.ok) {
                const data = await response.json();
                document.getElementById('Recently_Event').innerText = `${data.event_name}`;

                document.getElementById('Event_name').innerText = `${data.event_name}`;
                document.getElementById('Event_time').innerText = `${data.event_time}`;
                //document.getElementById('Event_image').src = `${data.event_image[1].x1}`;
                //document.getElementById('Event_nameLink').href = "event.html?event="+`${data.event_path}`;
                //document.getElementById('Event_imageLink').href = "event.html?event="+`${data.event_path}`;
                //document.getElementById('Event_bottonLink').href = "event.html?event="+`${data.event_path}`;
                document.getElementById('Match_Red0').src = `${data.match[0].red.image}`;
                document.getElementById('Match_Red0').height = `${data.match[0].red.height}`;
                document.getElementById('Match_Red0').width = `${data.match[0].red.width}`;

                document.getElementById('Match_Blue0').src = `${data.match[0].blue.image}`;
                document.getElementById('Match_Blue0').height = `${data.match[0].blue.height}`;
                document.getElementById('Match_Blue0').width = `${data.match[0].blue.width}`;
                /*
                for (var i = 0; i < data.match.length; i++){

                    var match = data.match[i];
                    document.getElementById('Match_Red'+i.toString()).src = `${data.match[i].red.image}`;
                    document.getElementById('Match_Bule'+i.toString()).src = `${data.match[i].blue.image}`;
                }*/
            } else {
                console.error('API request failed:', response.status);
                document.getElementById('message').innerText = `Error: Unable to fetch data`;
            }
    } catch (error) {
        console.error('Error during fetch:', error);
        document.getElementById('message').innerText = `Error: ${error.message}`;
    }
}

// 用来从后台获取数据的函数 (这里使用模拟数据)
function fetchFights() {
    return fetch('your-backend-url') // 用你的后台接口地址替换
        .then(response => response.json());
}

// 生成每场比赛的HTML结构
function generateFightHTML(fight) {
    return `
        <div class="matchup">
            <div class="fighter red-fighter">
                <img src="${fight.redFighter.image}" alt="${fight.redFighter.name}">
                <div class="fighter-info">
                    <p>#${fight.redFighter.rank}</p>
                    <h3>${fight.redFighter.name}</h3>
                    <p>${fight.redFighter.country}</p>
                    <p>ODDS: ${fight.redFighter.odds}</p>
                </div>
            </div>
            <div class="center">
                <h2>${fight.weightClass}</h2>
                <h3>VS</h3>
            </div>
            <div class="fighter blue-fighter">
                <img src="${fight.blueFighter.image}" alt="${fight.blueFighter.name}">
                <div class="fighter-info">
                    <p>#${fight.blueFighter.rank}</p>
                    <h3>${fight.blueFighter.name}</h3>
                    <p>${fight.blueFighter.country}</p>
                    <p>ODDS: ${fight.blueFighter.odds}</p>
                </div>
            </div>
        </div>
    `;
}

window.onload = function() {
    onLoadFunction();
};

document.addEventListener("DOMContentLoaded", function() {
    fetchFights()
        .then(fights => {
            const matchupsContainer = document.getElementById('matchups');
            fights.forEach(fight => {
                const fightHTML = generateFightHTML(fight);
                matchupsContainer.innerHTML += fightHTML;
            });
        })
        .catch(error => console.error('Error fetching fight data:', error));
});
